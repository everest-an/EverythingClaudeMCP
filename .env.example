# ==========================================================================
# AwesomeContext Gateway - Environment Variables
# ==========================================================================
# Copy this file to .env and adjust as needed:
#   cp .env.example .env
#
# Production architecture:
#   Railway / Render — MCP HTTP server + Python backend (Docker cloud stage)
#   Vercel           — Next.js landing page (auth, dashboard, API routes)
# ==========================================================================

# --- Server ---
HOST=0.0.0.0                   # Bind address (use 0.0.0.0 for cloud/Docker)
PORT=8080                      # Bind port (Railway/Render auto-set this)
# FASTAPI_HOST=127.0.0.1      # Alternative: used if HOST not set
# FASTAPI_PORT=8420            # Alternative: used if PORT not set

# --- Cloud mode (Docker cloud stage) ---
BACKEND_PORT=8420              # Internal Python backend port (not exposed)
# MCP_PORT is derived from PORT in cloud-start.sh; do not set separately.

# --- Data Paths ---
AC_TENSOR_DIR=data/tensors         # Compiled tensor files (.safetensors)
AC_INDEX_DIR=data/index            # Similarity index (embeddings.npy + manifest.json)

# --- Model Selection ---
# AC_MODEL=Qwen/Qwen3-4B                         # GPU (needs CUDA)
# AC_MODEL=Qwen/Qwen3-14B                        # GPU high-quality
# AC_MODEL=Qwen/Qwen2.5-Coder-1.5B-Instruct     # CPU fallback
# If unset: auto-detects (CUDA -> Qwen3-4B, CPU -> Qwen2.5-1.5B)

# --- Retrieval-Only Mode ---
# Set to "true" for cloud deployment without LLM model.
# Skips model loading entirely. Uses keyword search instead of embedding.
# Response time: ~5ms per query. Memory: ~100MB.
AC_RETRIEVAL_ONLY=true

# --- Public Mode (MCP auth) ---
# Set to "true" to skip API key validation.
# Users can connect without signing up. Ideal for initial deployment / testing.
# Set to "false" once landing page + database are configured.
AC_PUBLIC_MODE=true

# --- PostgreSQL (required when AC_PUBLIC_MODE=false) ---
DATABASE_URL=postgresql://awesomecontext:ac_dev_password@localhost:5432/awesomecontext
POSTGRES_USER=awesomecontext
POSTGRES_PASSWORD=ac_dev_password
POSTGRES_DB=awesomecontext

# --- Auth.js (Landing Page - Vercel) ---
AUTH_SECRET=                           # Generate with: npx auth secret
AUTH_URL=https://awesomecontext.awareness.market  # Production URL
AUTH_GOOGLE_ID=                        # Google OAuth Client ID
AUTH_GOOGLE_SECRET=                    # Google OAuth Client Secret
AUTH_GITHUB_ID=                        # GitHub OAuth App Client ID
AUTH_GITHUB_SECRET=                    # GitHub OAuth App Client Secret
AUTH_RESEND_KEY=                       # Resend API key (for email magic link login)
AUTH_EMAIL_FROM=AwesomeContext <noreply@awesomecontext.dev>  # Sender address
AUTH_TRUST_HOST=true

# --- Admin ---
ADMIN_EMAILS=                          # Comma-separated admin emails

# --- Internal API Secret (MCP <-> Landing) ---
# Must be identical on Railway/Render and Vercel. Generate with: openssl rand -hex 32
INTERNAL_API_SECRET=

# --- MCP Server Auth (Railway/Render side) ---
# These point to the Vercel-hosted landing page API routes.
# Dev:
AC_VALIDATE_KEY_URL=http://localhost:3001/api/validate-key
AC_LOG_USAGE_URL=http://localhost:3001/api/log-usage
# Production:
# AC_VALIDATE_KEY_URL=https://awesomecontext.awareness.market/api/validate-key
# AC_LOG_USAGE_URL=https://awesomecontext.awareness.market/api/log-usage
